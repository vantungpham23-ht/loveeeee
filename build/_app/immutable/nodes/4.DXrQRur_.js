import"../chunks/CWj6FrbW.js";import{i as Z}from"../chunks/BpldQMAd.js";import{o as ua}from"../chunks/BBvWJmYc.js";import{p as aa,aU as S,s as b,m as _,aS as x,aV as ta,f as d,d as l,r as o,g,B as n,t as M,k as C,i as a,b as i,c as ea,h as ba,$ as _a,j as q,a as O,aW as xa,aX as ga}from"../chunks/Cslclzbr.js";import{i as T}from"../chunks/D4P07oHo.js";import{e as F,i as J}from"../chunks/CRhN_H0k.js";import{s as ya,a as ha}from"../chunks/B9n_ukdH.js";import{p as ka}from"../chunks/BLSLRxGr.js";import{a as Ma,g as Ya}from"../chunks/CrxYcAco.js";import{s as Q}from"../chunks/0uQcGVMJ.js";import{p as Aa}from"../chunks/C42AZTO_.js";import{s as $a}from"../chunks/BMfMfNjS.js";import{d as U}from"../chunks/DkinEwNE.js";function R(Y,y=720,p=70){return $a.storage.from("memories").getPublicUrl(Y,{transform:{width:y,quality:p}}).data.publicUrl}var ja=d('<p class="text-gray-700 mb-2"> </p>'),Da=d('<div class="card mb-4"><div class="mb-3"><img class="w-full h-64 object-cover rounded-2xl" loading="lazy"/></div> <!> <div class="text-sm text-gray-500 flex items-center"><span class="mr-2">üìÖ</span> <span> </span></div></div>');function wa(Y,y){aa(y,!1);const p=_();let s=Aa(y,"memory",8);S(()=>x(s()),()=>{b(p,U(s().created_at).format("DD/MM/YYYY HH:mm"))}),ta(),Z();var A=Da(),v=l(A),h=l(v);o(v);var $=g(v,2);{var f=u=>{var w=ja(),z=l(w,!0);o(w),M(()=>C(z,(x(s()),n(()=>s().caption)))),i(u,w)};T($,u=>{x(s()),n(()=>s().caption)&&u(f)})}var r=g($,2),j=g(l(r),2),D=l(j,!0);o(j),o(r),o(A),M(u=>{Q(h,"src",u),Q(h,"alt",(x(s()),n(()=>s().caption||"Memory"))),C(D,a(p))},[()=>(x(R),x(s()),n(()=>R(s().media_url,720,70)))]),i(Y,A),ea()}var Ba=d('<div class="flex justify-center items-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500"></div></div>'),Ta=d(`<div class="text-center py-12"><div class="text-6xl mb-4">üòû</div> <h2 class="text-2xl font-semibold text-gray-700 mb-2">Album not found</h2> <p class="text-gray-500 mb-6">The album you're looking for doesn't exist.</p> <a href="/albums" class="btn-primary inline-block">Back to Albums</a></div>`),Ua=d('<p class="text-gray-600"> </p>'),Ca=d('<div class="text-center py-12"><div class="text-6xl mb-4">üì∏</div> <h2 class="text-2xl font-semibold text-gray-700 mb-2">No memories yet</h2> <p class="text-gray-500 mb-6">Start adding photos and videos to this album!</p> <a href="/upload" class="btn-primary inline-block">Add Memory</a></div>'),Ha=d('<div class="mb-8"><h2 class="text-xl font-semibold text-gray-700 mb-4 sticky top-4 bg-pink-50 py-2 px-4 rounded-2xl"> </h2> <div class="space-y-4"></div></div>'),Pa=d('<div class="mb-8"><a href="/albums" class="text-pink-600 hover:text-pink-700 mb-4 inline-block">‚Üê Back to Albums</a> <h1 class="text-3xl font-bold text-pink-600 mb-2"> </h1> <!></div> <!>',1),Sa=d('<div class="container mx-auto px-4 py-8"><!></div>');function Ja(Y,y){aa(y,!1);const p=()=>ha(ka,"$page",s),[s,A]=ya(),v=_(),h=_(),$=_();let f=_([]),r=_(null),j=_(!0);ua(async()=>{if(a(v))try{const[t,e]=await Promise.all([Ma(a(v)),Ya()]);b(f,t),b(r,e.find(H=>H.id===a(v)))}catch(t){console.error("Error loading album:",t)}finally{b(j,!1)}}),S(()=>p(),()=>{b(v,p().params.id)}),S(()=>(a(f),U),()=>{b(h,a(f).reduce((t,e)=>{const B=U(e.created_at).format("YYYY-MM");return t[B]||(t[B]=[]),t[B].push(e),t},{}))}),S(()=>a(h),()=>{b($,Object.entries(a(h)).sort(([t],[e])=>e.localeCompare(t)))}),ta(),Z();var D=Sa();ba(t=>{M(()=>_a.title=`${a(r),n(()=>{var e;return((e=a(r))==null?void 0:e.title)||"Album"})??""} - Love Timeline`)});var u=l(D);{var w=t=>{var e=Ba();i(t,e)},z=t=>{var e=q(),H=O(e);{var B=k=>{var P=Ta();i(k,P)},ra=k=>{var P=Pa(),E=O(P),G=g(l(E),2),sa=l(G,!0);o(G);var oa=g(G,2);{var ia=m=>{var c=Ua(),I=l(c,!0);o(c),M(()=>C(I,(a(r),n(()=>a(r).description)))),i(m,c)};T(oa,m=>{a(r),n(()=>a(r).description)&&m(ia)})}o(E);var la=g(E,2);{var ma=m=>{var c=Ca();i(m,c)},na=m=>{var c=q(),I=O(c);F(I,1,()=>a($),J,(da,va)=>{var V=xa(()=>ga(a(va),2));let W=()=>a(V)[0],ca=()=>a(V)[1];var K=Ha(),L=l(K),pa=l(L,!0);o(L);var X=g(L,2);F(X,5,ca,J,(N,fa)=>{wa(N,{get memory(){return a(fa)}})}),o(X),o(K),M(N=>C(pa,N),[()=>(x(U),W(),n(()=>U(W()).format("MMMM YYYY")))]),i(da,K)}),i(m,c)};T(la,m=>{a(f),n(()=>a(f).length===0)?m(ma):m(na,!1)})}M(()=>C(sa,(a(r),n(()=>a(r).title)))),i(k,P)};T(H,k=>{a(r)?k(ra,!1):k(B)},!0)}i(t,e)};T(u,t=>{a(j)?t(w):t(z,!1)})}o(D),i(Y,D),ea(),A()}export{Ja as component};
