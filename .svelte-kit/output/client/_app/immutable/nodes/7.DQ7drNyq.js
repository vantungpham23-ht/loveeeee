import"../chunks/CWj6FrbW.js";import{i as _e}from"../chunks/C2Irgtfr.js";import{o as we}from"../chunks/iwpuV49D.js";import{p as Ce,d as m,h as ke,a as c,b as je,$ as Je,s as e,m as p,g as r,e as o,i,r as a,c as ae,f as Q,t as P,k as A,j as h,n as Se}from"../chunks/DiGzQK4H.js";import{i as y}from"../chunks/CocUypoM.js";import{r as V}from"../chunks/CG4qGLFF.js";import{b as X}from"../chunks/C5Zgnl88.js";import{p as ie}from"../chunks/CWmzcjye.js";import{g as Z}from"../chunks/BAi05rh5.js";import"../chunks/yeyBXsSr.js";import{g as Te,c as Fe,j as Pe}from"../chunks/CyEOziNv.js";var Ae=m('<meta name="description" content="Create or join a couple to start sharing memories"/>'),Ee=m('<div class="text-center"><div class="animate-spin rounded-full h-16 w-16 border-b-2 border-rose-500 mx-auto mb-6"></div> <h2 class="text-2xl font-bold text-gray-700 mb-2">Checking couple status...</h2> <p class="text-gray-600">Please wait while we check your couple information</p></div>'),Ne=m('<div class="text-center"><div class="text-6xl mb-6">💕</div> <h2 class="text-2xl font-bold text-gray-700 mb-2">Couple Active!</h2> <p class="text-gray-600 mb-6">Redirecting to your timeline...</p> <a href="/" class="inline-block bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 text-white px-8 py-3 rounded-2xl font-semibold text-lg transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:scale-105">Go to Timeline 💕</a></div>'),De=m('<div class="bg-rose-50 rounded-2xl p-4 mb-6"><h3 class="font-semibold text-gray-700 mb-2">Share this invite code:</h3> <div class="flex items-center justify-between bg-white rounded-xl p-3 border border-rose-200"><code class="text-lg font-mono font-bold text-rose-600"> </code> <button class="text-rose-500 hover:text-rose-600 transition-colors">📋</button></div></div>'),Ie=m('<div class="bg-white rounded-3xl shadow-lg p-8"><div class="text-center mb-6"><div class="text-6xl mb-4">⏳</div> <h2 class="text-2xl font-bold text-gray-700 mb-2">Waiting for Partner</h2> <p class="text-gray-600"> </p></div> <!> <div class="text-center"><p class="text-sm text-gray-500 mb-4">Your partner needs to enter this code to join your couple</p> <button class="text-gray-500 hover:text-gray-700 transition-colors">← Back to Timeline</button></div></div>'),qe=m('<div class="mt-8 bg-white rounded-3xl shadow-lg p-6"><h3 class="text-xl font-bold text-gray-700 mb-4">Create New Couple</h3> <form class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">Couple Name</label> <input type="text" placeholder="e.g., John &amp; Jane" required class="w-full px-4 py-3 rounded-2xl border border-gray-200 focus:border-rose-300 focus:ring-2 focus:ring-rose-100 transition-colors duration-200"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">Start Date (Optional)</label> <input type="date" class="w-full px-4 py-3 rounded-2xl border border-gray-200 focus:border-rose-300 focus:ring-2 focus:ring-rose-100 transition-colors duration-200"/></div> <div class="flex space-x-3"><button type="button" class="flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors">Cancel</button> <button type="submit" class="flex-1 bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 text-white px-4 py-3 rounded-xl font-medium transition-all duration-200 disabled:opacity-50"> </button></div></form></div>'),Le=m('<div class="mt-8 bg-white rounded-3xl shadow-lg p-6"><h3 class="text-xl font-bold text-gray-700 mb-4">Join Existing Couple</h3> <form class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">Invite Code</label> <input type="text" placeholder="Enter 8-character code" required maxlength="8" class="w-full px-4 py-3 rounded-2xl border border-gray-200 focus:border-rose-300 focus:ring-2 focus:ring-rose-100 transition-colors duration-200 text-center font-mono text-lg"/> <p class="text-sm text-gray-500 mt-2">Ask your partner for the invite code</p></div> <div class="flex space-x-3"><button type="button" class="flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors">Cancel</button> <button type="submit" class="flex-1 bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 text-white px-4 py-3 rounded-xl font-medium transition-all duration-200 disabled:opacity-50"> </button></div></form></div>'),Re=m('<div class="text-center mb-8"><div class="text-6xl mb-4">💖</div> <h1 class="text-3xl font-bold text-pink-600 mb-2">Welcome to Love Timeline</h1> <p class="text-gray-600">Create or join a couple to start sharing your memories together</p></div> <div class="space-y-4"><button class="w-full bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 text-white px-6 py-4 rounded-2xl font-semibold text-lg transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:scale-105">Create New Couple 💕</button> <button class="w-full bg-white border-2 border-rose-300 text-rose-600 hover:bg-rose-50 px-6 py-4 rounded-2xl font-semibold text-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105">Join Existing Couple 💖</button></div> <!> <!>',1),We=m('<div class="mt-6 p-4 bg-red-50 border border-red-200 rounded-2xl"><p class="text-red-700 text-sm"> </p></div>'),Ye=m('<div class="mt-6 p-4 bg-green-50 border border-green-200 rounded-2xl"><p class="text-green-700 text-sm"> </p></div>'),Be=m('<div class="min-h-screen bg-gradient-to-br from-rose-50 via-pink-50 to-fuchsia-50 flex items-center justify-center px-4"><div class="max-w-md w-full"><!> <!> <!></div></div>');function Ze(se,le){Ce(le,!1);let O=p(!0),b=p(null),E=p(!1),N=p(!1),Y=p(!1),B=p(!1),d=p(""),v=p(""),_=p(""),D=p(""),J=p("");we(async()=>{await ee()});async function ee(){var t;try{if(e(O,!0),e(b,await Te()),(t=r(b))!=null&&t.isActive){Z("/");return}}catch(s){console.error("Error checking couple status:",s),e(d,"Failed to check couple status")}finally{e(O,!1)}}async function ne(){if(!r(_).trim()){e(d,"Please enter a couple name");return}try{e(Y,!0),e(d,""),e(v,"");const t=await Fe(r(_).trim(),r(D)||void 0);t&&(e(v,`Couple "${r(_)}" created successfully! Share this invite code with your partner: ${t.invite_code}`),e(E,!1),e(_,""),e(D,""),await ee())}catch(t){e(d,t.message||"Failed to create couple")}finally{e(Y,!1)}}async function de(){if(!r(J).trim()){e(d,"Please enter an invite code");return}try{e(B,!0),e(d,""),e(v,""),await Pe(r(J).trim().toUpperCase())&&(e(v,"Successfully joined the couple! Redirecting to timeline..."),e(N,!1),e(J,""),setTimeout(()=>{Z("/")},2e3))}catch(t){e(d,t.message||"Failed to join couple")}finally{e(B,!1)}}function ce(t){navigator.clipboard.writeText(t),e(v,"Invite code copied to clipboard!")}_e();var U=Be();ke(t=>{var s=Ae();Je.title="Couple Setup - Love Timeline",c(t,s)});var te=o(U),re=o(te);{var ve=t=>{var s=Ee();c(t,s)},ue=t=>{var s=ae(),w=Q(s);{var I=S=>{var C=Ne();c(S,C)},xe=S=>{var C=ae(),be=Q(C);{var ge=T=>{var x=Ie(),k=o(x),q=i(o(k),4),$=o(q);a(q),a(k);var L=i(k,2);{var z=l=>{var n=De(),f=i(o(n),2),u=o(f),j=o(u,!0);a(u);var g=i(u,2);a(f),a(n),P(()=>A(j,r(b).couple.invite_code)),h("click",g,()=>ce(r(b).couple.invite_code)),c(l,n)};y(L,l=>{var n;(n=r(b).couple)!=null&&n.invite_code&&l(z)})}var G=i(L,2),H=i(o(G),2);a(G),a(x),P(()=>{var l;return A($,`Your couple "${((l=r(b).couple)==null?void 0:l.couple_name)??""}" is waiting for your partner to join`)}),h("click",H,()=>Z("/")),c(T,x)},he=T=>{var x=Re(),k=i(Q(x),2),q=o(k),$=i(q,2);a(k);var L=i(k,2);{var z=l=>{var n=qe(),f=i(o(n),2),u=o(f),j=i(o(u),2);V(j),a(u);var g=i(u,2),R=i(o(g),2);V(R),a(g);var F=i(g,2),M=o(F),W=i(M,2),ye=o(W,!0);a(W),a(F),a(f),a(n),P(()=>{W.disabled=r(Y),A(ye,r(Y)?"Creating...":"Create Couple")}),X(j,()=>r(_),K=>e(_,K)),X(R,()=>r(D),K=>e(D,K)),h("click",M,()=>{e(E,!1),e(_,""),e(D,""),e(d,""),e(v,"")}),h("submit",f,ie(ne)),c(l,n)};y(L,l=>{r(E)&&l(z)})}var G=i(L,2);{var H=l=>{var n=Le(),f=i(o(n),2),u=o(f),j=i(o(u),2);V(j),Se(2),a(u);var g=i(u,2),R=o(g),F=i(R,2),M=o(F,!0);a(F),a(g),a(f),a(n),P(()=>{F.disabled=r(B),A(M,r(B)?"Joining...":"Join Couple")}),X(j,()=>r(J),W=>e(J,W)),h("click",R,()=>{e(N,!1),e(J,""),e(d,""),e(v,"")}),h("submit",f,ie(de)),c(l,n)};y(G,l=>{r(N)&&l(H)})}h("click",q,()=>{e(E,!0),e(N,!1),e(d,""),e(v,"")}),h("click",$,()=>{e(N,!0),e(E,!1),e(d,""),e(v,"")}),c(T,x)};y(be,T=>{var x;(x=r(b))!=null&&x.isPending?T(ge):T(he,!1)},!0)}c(S,C)};y(w,S=>{var C;(C=r(b))!=null&&C.isActive?S(I):S(xe,!1)},!0)}c(t,s)};y(re,t=>{r(O)?t(ve):t(ue,!1)})}var oe=i(re,2);{var pe=t=>{var s=We(),w=o(s),I=o(w);a(w),a(s),P(()=>A(I,`⚠️ ${r(d)??""}`)),c(t,s)};y(oe,t=>{r(d)&&t(pe)})}var me=i(oe,2);{var fe=t=>{var s=Ye(),w=o(s),I=o(w);a(w),a(s),P(()=>A(I,`✅ ${r(v)??""}`)),c(t,s)};y(me,t=>{r(v)&&t(fe)})}a(te),a(U),c(se,U),je()}export{Ze as component};
