import{s as t}from"./yeyBXsSr.js";import{g as n}from"./CyEOziNv.js";async function c(e,a,o){const r=new FormData;r.append("file",e),r.append("album_id",a),o&&r.append("caption",o);const i=await fetch("/api/upload",{method:"POST",body:r});if(!i.ok)throw new Error("Upload failed");return i.json()}async function f(){var r;const e=await n();if(!(e!=null&&e.isActive)||!((r=e==null?void 0:e.couple)!=null&&r.id))return[];const{data:a,error:o}=await t.from("albums").select("*").eq("couple_id",e.couple.id).order("created_at",{ascending:!1});if(o)throw o;return a}async function m(e){var i;const a=await n();if(!(a!=null&&a.isActive)||!((i=a==null?void 0:a.couple)!=null&&i.id))return[];const{data:o,error:r}=await t.from("memories").select("*").eq("album_id",e).eq("couple_id",a.couple.id).order("created_at",{ascending:!1});if(r)throw r;return o}export{m as a,f as g,c as u};
