import"../chunks/CWj6FrbW.js";import{i as nr}from"../chunks/BpldQMAd.js";import{o as cr}from"../chunks/BBvWJmYc.js";import{p as dr,f as b,h as vr,a as M,e as E,b as n,c as mr,$ as ur,s as e,m as f,d as s,g as i,r as a,i as t,j as J,t as I,k as D}from"../chunks/Cslclzbr.js";import{i as j}from"../chunks/D4P07oHo.js";import{e as br,i as pr}from"../chunks/CRhN_H0k.js";import{r as K,s as fr}from"../chunks/0uQcGVMJ.js";import{b as O}from"../chunks/NqDlTKQn.js";import{s as P}from"../chunks/BMfMfNjS.js";var xr=b('<div class="flex justify-center items-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500"></div> <span class="ml-3 text-gray-600">Loading albums...</span></div>'),gr=b('<div class="text-center py-12"><div class="text-6xl mb-4">‚ö†Ô∏è</div> <h2 class="text-2xl font-semibold text-gray-700 mb-2">Error</h2> <p class="text-red-600 mb-4"> </p> <button class="btn-primary">Retry</button></div>'),_r=b('<div class="text-center py-12"><div class="text-6xl mb-4">üì∏</div> <h2 class="text-2xl font-semibold text-gray-700 mb-2">No albums yet</h2> <p class="text-gray-500 mb-6">Create your first album to get started!</p> <button class="btn-primary">Create Your First Album</button></div>'),yr=b('<p class="text-gray-600 text-sm"> </p>'),hr=b('<a class="block"><div class="card hover:shadow-lg transition-shadow duration-200"><h3 class="text-xl font-semibold text-gray-800 mb-2"> </h3> <!> <p class="text-xs text-gray-500 mt-2"> </p></div></a>'),wr=b('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),kr=b('<div class="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-2xl p-6 w-full max-w-md"><h2 class="text-2xl font-bold text-gray-800 mb-4">Create New Album</h2> <div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-2">Title</label> <input placeholder="Enter album title" type="text" class="w-full px-4 py-3 rounded-2xl border border-gray-200 focus:border-pink-300 focus:ring-2 focus:ring-pink-100 transition-colors duration-200"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">Description (optional)</label> <input placeholder="Enter album description" type="text" class="w-full px-4 py-3 rounded-2xl border border-gray-200 focus:border-pink-300 focus:ring-2 focus:ring-pink-100 transition-colors duration-200"/></div></div> <div class="flex gap-3 mt-6"><button class="flex-1 px-4 py-2 border border-gray-200 bg-white hover:bg-gray-50 rounded-2xl transition-colors duration-200">Cancel</button> <button class="flex-1 btn-primary disabled:opacity-50"> </button></div></div></div>'),Cr=b('<div class="container mx-auto px-4 py-8"><div class="flex justify-between items-center mb-8"><h1 class="text-3xl font-bold text-pink-600">üìö Albums</h1> <button class="btn-primary">Create Album</button></div> <!></div> <!>',1);function Nr(Q,V){dr(V,!1);let y=f([]),R=f(!0),p=f(""),L=f(!1),x=f(""),$=f(""),h=f(!1);cr(async()=>{await Y()});async function Y(){try{console.log("Loading albums...");const{data:r,error:o}=await P.from("albums").select("*").order("created_at",{ascending:!1});o?(console.error("Supabase error:",o),e(p,`Database Error: ${o.message}`)):(console.log("Success! Albums:",r),e(y,r||[]))}catch(r){console.error("Connection error:",r),e(p,`Connection Error: ${r instanceof Error?r.message:"Unknown error"}`)}finally{e(R,!1)}}async function W(){if(t(x).trim()){e(L,!0);try{const{data:r,error:o}=await P.from("albums").insert({title:t(x),description:t($)||null}).select().single();o?(console.error("Insert error:",o),e(p,`Insert Error: ${o.message}`)):(console.log("Album created:",r),e(y,[r,...t(y)]),e(h,!1),e(x,""),e($,""),e(p,""))}catch(r){console.error("Create error:",r),e(p,`Create Error: ${r instanceof Error?r.message:"Unknown error"}`)}finally{e(L,!1)}}}nr();var q=Cr();vr(r=>{ur.title="Albums - Love Timeline"});var N=M(q),U=s(N),X=i(s(U),2);a(U);var Z=i(U,2);{var rr=r=>{var o=xr();n(r,o)},tr=r=>{var o=J(),S=M(o);{var w=c=>{var d=gr(),u=i(s(d),4),g=s(u,!0);a(u);var _=i(u,2);a(d),I(()=>D(g,t(p))),E("click",_,Y),n(c,d)},k=c=>{var d=J(),u=M(d);{var g=l=>{var v=_r(),m=i(s(v),6);a(v),E("click",m,()=>e(h,!0)),n(l,v)},_=l=>{var v=wr();br(v,5,()=>t(y),pr,(m,C)=>{var T=hr(),B=s(T),z=s(B),sr=s(z,!0);a(z);var G=i(z,2);{var or=A=>{var F=yr(),lr=s(F,!0);a(F),I(()=>D(lr,t(C).description)),n(A,F)};j(G,A=>{t(C).description&&A(or)})}var H=i(G,2),ir=s(H);a(H),a(B),a(T),I(A=>{fr(T,"href",`/albums/${t(C).id??""}`),D(sr,t(C).title),D(ir,`Created: ${A??""}`)},[()=>new Date(t(C).created_at).toLocaleDateString()]),n(m,T)}),a(v),n(l,v)};j(u,l=>{t(y).length===0?l(g):l(_,!1)},!0)}n(c,d)};j(S,c=>{t(p)?c(w):c(k,!1)},!0)}n(r,o)};j(Z,r=>{t(R)?r(rr):r(tr,!1)})}a(N);var er=i(N,2);{var ar=r=>{var o=kr(),S=s(o),w=i(s(S),2),k=s(w),c=i(s(k),2);K(c),a(k);var d=i(k,2),u=i(s(d),2);K(u),a(d),a(w);var g=i(w,2),_=s(g),l=i(_,2),v=s(l,!0);a(l),a(g),a(S),a(o),I(m=>{l.disabled=m,D(v,t(L)?"Creating...":"Create")},[()=>t(L)||!t(x).trim()]),O(c,()=>t(x),m=>e(x,m)),O(u,()=>t($),m=>e($,m)),E("click",_,()=>e(h,!1)),E("click",l,W),n(r,o)};j(er,r=>{t(h)&&r(ar)})}E("click",X,()=>e(h,!0)),n(Q,q),mr()}export{Nr as component};
